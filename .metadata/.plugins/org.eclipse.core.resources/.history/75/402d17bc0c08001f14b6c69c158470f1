import java.util.Map;

import studiplayer.basic.TagReader;

public class TaggedFile extends SampledFile{
		private String title = "";
		private String author = "";
		private long duration = 0;
		private String album = "";
	
		public TaggedFile(){

		}

		public TaggedFile(String path) {
			this.parsePathname(path);
			
			this.parseFilename(getFilename());
			this.readAndStoreTags();
		}

		public String getAlbum() {
			
			return album;
		}
		
		public String getTitle() {
			
			return title;
		}
		
		public long getDuration() {
			
			return duration;
		}
		
		public String getAuthor() {
			
			return author;
		}

		public void readAndStoreTags() {
			
				Map<String, Object> tagMap = TagReader.readTags(this.getPathname());										
				title = "lol"
//				var title = tagMap.get("title").toString().trim();
//				if (title != null) {
//					this.title = title;
//				}
				var author = tagMap.get("author").toString().trim();
				if (author != null) {
					this.author = author;
				}
				String durationString;
				durationString = tagMap.get("duration").toString();
				var duration = Integer.parseInt(durationString);	
				if (duration != 0) {
					this.duration = duration;
				}
				var album = tagMap.get("album").toString().trim();
				if (album != null) {
					this.album = album;
				}
				
		}

		public String toString() {
			
			String taggedFileToString = this.getAuthor() + " - " + this.getTitle();
			if(this.getAlbum() != "") {
				taggedFileToString += " - " + getAlbum();
			}
			taggedFileToString += " - " + TaggedFile.timeFormatter(this.duration);
			return taggedFileToString;
		}


		
		
	}
